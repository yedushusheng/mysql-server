enable parallel query with max_parallel_degree = 1
CREATE TABLE t1(a INT);
INSERT INTO t1 VALUES(1), (2);
# worker initialization failure tests
SELECT * FROM t1;
a
1
2
SET debug = 'd,pq_simulate_worker_init_exec_state_error';
SELECT * FROM t1;
ERROR HY000: Got unknown error: 2
SET debug = '-d,pq_simulate_worker_init_exec_state_error';
INSERT INTO t1 WITH RECURSIVE gen(a) AS (SELECT 1 UNION ALL SELECT a + 1 FROM gen WHERE a < 20) SELECT * FROM gen;
# one worker send partial result to leader
SET debug = 'd,pq_simulate_one_worker_part_result_error';
SELECT * FROM t1 ORDER BY a LIMIT 2 OFFSET 20;
ERROR HY000: Got unknown error: 1
SET debug = '-d,pq_simulate_one_worker_part_result_error';
DROP TABLE t1;
