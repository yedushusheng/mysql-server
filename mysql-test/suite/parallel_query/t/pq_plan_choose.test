--source suite/parallel_query/include/pq_default.inc

CREATE TABLE t1(a int primary key, b int, c text, index(b));
INSERT INTO t1 VALUES(1, 1, '1'),(2, 2, '2');

EXPLAIN FORMAT=tree SELECT * FROM t1;

# parallel plan should be choosed because there is no blob in collector table.
EXPLAIN FORMAT=tree SELECT b FROM t1 where c = 1;
EXPLAIN FORMAT=tree SELECT a, b FROM t1 WHERE a = 1;
EXPLAIN FORMAT=tree SELECT a, b FROM t1 WHERE b = 1;
EXPLAIN FORMAT=tree SELECT b FROM t1 WHERE b between 1 and 2;

DROP TABLE t1;

# We don't support IN sub query because we don't support clone of its refs in
# items yet.
CREATE TABLE t1 (f1 INT, f2 INT);
INSERT INTO t1 VALUES (1, 0), (2, 1), (3, 2);
CREATE TABLE t2 (f1 INT, f2 INT);

EXPLAIN FORMAT=tree SELECT t1.f1
FROM t1
HAVING (3, 2) IN (SELECT f1, f2 FROM t2) AND t1.f1  >= 0
ORDER BY t1.f1;
DROP TABLE t1, t2;

# Don't support Item_func_not_all() with subquery
CREATE TABLE t1(a int);
SELECT 1 FROM t1 WHERE 1 > ALL(SELECT 1 FROM t1 WHERE a);
DROP TABLE t1;
